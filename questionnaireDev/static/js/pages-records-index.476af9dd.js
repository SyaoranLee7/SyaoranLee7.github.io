(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-records-index"],{"06e8":function(t,e,a){var r=a("5104");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=a("4f06").default;i("3ea3e3aa",r,!0,{sourceMap:!1,shadowMode:!1})},"0bc1":function(t,e,a){"use strict";a.r(e);var r=a("eedb"),i=a.n(r);for(var n in r)"default"!==n&&function(t){a.d(e,t,(function(){return r[t]}))}(n);e["default"]=i.a},5104:function(t,e,a){var r=a("24fb");e=r(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\n * 使用的时候，请将下面的一行复制到您的uniapp项目根目录的uni.scss中即可\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \n */\n/**\n*  请定义在上面的模版里 按照 ·$u-属性-值· 命名如 $u-font-sm\n*/uni-page-body[data-v-5d6db4be]{background:#eee}.app-record[data-v-5d6db4be]{padding:%?28?%}.app-record .app-record-header[data-v-5d6db4be]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.app-record .app-record-header-info[data-v-5d6db4be]{width:60vw}.app-record .app-record-header-info .date[data-v-5d6db4be]{color:#999}.app-record .app-record-header-info .info[data-v-5d6db4be]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.app-record .app-record-header-info .info .nums[data-v-5d6db4be]{font-weight:600;font-size:42px;font-family:Arial,Helvetica,sans-serif;margin-right:%?20?%}.app-record .app-record-header-info .info .nums2[data-v-5d6db4be]{font-weight:600;font-size:28px;font-family:Arial,Helvetica,sans-serif;margin-right:%?20?%}.app-record .app-record-header-info .info .unit .tags[data-v-5d6db4be]{border:1px #ff5630 solid;text-align:center;color:#ff5630;border-radius:2px;font-size:12px;margin-bottom:2px;padding:0 4px}.app-record .app-record-header-info .info .unit .units[data-v-5d6db4be]{font-size:12px;color:#666}.app-record .app-record-header-btn[data-v-5d6db4be]{background:#eee;padding:10px;font-size:16px;border-radius:20px;color:#fff;background:#3974fe}.app-record-chart[data-v-5d6db4be]{margin-top:20px;background:#fff;padding:%?28?%;border-radius:10px}.app-record-chart-header .title[data-v-5d6db4be]{font-size:18px;font-weight:700;margin-bottom:%?20?%}.charts[data-v-5d6db4be]{width:%?638?%;height:%?400?%}body.?%PAGE?%[data-v-5d6db4be]{background:#eee}',""]),t.exports=e},"6fed":function(t,e,a){"use strict";a.r(e);var r=a("fcdf"),i=a("0bc1");for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);a("7fc3");var o,s=a("f0c5"),d=Object(s["a"])(i["default"],r["b"],r["c"],!1,null,"5d6db4be",null,!1,r["a"],o);e["default"]=d.exports},"7fc3":function(t,e,a){"use strict";var r=a("06e8"),i=a.n(r);i.a},d496:function(t,e,a){"use strict";function r(t){var e=new Date(t),a=e.getFullYear(),r=e.getMonth()+1>10?e.getMonth()+1:"0"+(e.getMonth()+1),i=e.getDate()>10?e.getDate():"0"+e.getDate();return a+"-"+r+"-"+i}function i(t,e){var a,r,i,n;return a=t.split("-"),r=new Date(a[1]+"-"+a[2]+"-"+a[0]),a=e.split("-"),i=new Date(a[1]+"-"+a[2]+"-"+a[0]),n=parseInt(Math.abs(r-i)/1e3/60/60/24),n+1}function n(t,e){var a=i(t,e),r=a>90?Boolean(0):Boolean(1);return{state:r,day:a}}function o(t){for(var e=[],a=0;a<t;a++){var r=new Date;r.setTime(r.getTime()-864e5*a);var i=r.getFullYear(),n=r.getMonth()+1>=10?r.getMonth()+1:"0"+(r.getMonth()+1),o=r.getDate()>=10?r.getDate():"0"+r.getDate(),s=i+"-"+n+"-"+o;e.push(s)}return e}function s(t){var e=new Date;e.setTime(e.getTime()-864e5);var a=e.getFullYear(),r=e.getMonth()+1>=10?e.getMonth()+1:"0"+(e.getMonth()+1),i=e.getDate()>=10?e.getDate():"0"+e.getDate(),n=a+"-"+r+"-"+i,o=new Date;o.setTime(o.getTime()-864e5*t);var s=o.getFullYear(),d=o.getMonth()+1>10?o.getMonth()+1:"0"+(o.getMonth()+1),c=o.getDate()>10?o.getDate():"0"+o.getDate(),l=s+"-"+d+"-"+c;return{end:n,start:l}}function d(t,e){var a=o(1);return a}function c(){var t=o(7);return t}function l(){var t=s(7);return t}function u(){var t=o(30);return t}a("e25e"),a("ac1f"),a("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.formatDate=r,e.countDate=n,e.yesterday=d,e.sevenDays=c,e.thirtyDays=u,e.sevenDaysSE=l},eedb:function(t,e,a){"use strict";(function(t){var r=a("4ea4");a("99af"),a("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(a("b85c")),n=a("0c57"),o=a("1c31"),s=a("4239"),d=a("d496"),c=r(a("f6e8")),l={},u={data:function(){return{taskId:"",objid:"",cWidth:750,cHeight:500,data:[],mdColCode:"",records_data:{},chart_date:[],chart_value:[],chart_name:"",ruslt:"",isLoad:!1}},onReady:function(){this.cWidth=uni.upx2px(638),this.cHeight=uni.upx2px(400),this.init()},onShow:function(){},onLoad:function(t){(null===t||void 0===t?void 0:t.objid)&&(this.objid=t.objid),(null===t||void 0===t?void 0:t.taskid)&&(this.taskId=t.taskid),this.getConfigList(),this.getDataByKey()},methods:{getConfigList:function(){var t=this,e={tableId:this.objid};(0,s.columnCfgList)(e).then((function(e){"0"==e.code&&e.data&&e.data.length>0&&(t.records_data=e.data[0],t.chart_name=e.data[0].name,t.getDataList())}))},getDataList:function(){var t=this,e=(0,d.sevenDaysSE)(7),a={mdColCode:this.records_data.mdsdCode,endDate:e.end,mdTableId:this.objid,page:1,rows:10,startDate:e.start};(0,n.queryDataHistoryById)(a).then((function(e){if("0"===e.code&&e.data){var a,r=(0,i.default)(e.data);try{for(r.s();!(a=r.n()).done;){var n=a.value;if(n.content){var o=n.content;for(var s in t.chart_date.push(n.cdt),o){var d=o[s];t.chart_value.push(Number(d))}}}}catch(c){r.e(c)}finally{r.f()}t.getServerData(),t.getRuslt()}else t.getServerData()}))},getRuslt:function(){if(this.chart_value.length>0){var t;t=this.chart_value.length>1?Number(this.chart_value[length-1]):Number(this.chart_value[length]);var e=Number(this.records_data.valNum.re),a=Number(this.records_data.valNum.rs);t<a?(this.ruslt="异常降低",this.levels="error"):t>e?(this.ruslt="异常上升",this.levels="error"):(this.ruslt="正常",this.levels="success")}},getServerData:function(){var t={categories:this.chart_date,series:[{name:this.chart_name,data:this.chart_value}]};this.drawCharts("husfiVOlUCYUOvrgQRKYBktPCTnAPohJ",t)},drawCharts:function(t,e){var a=uni.createCanvasContext(t,this);l[t]=new c.default({type:"line",context:a,width:this.cWidth,height:this.cHeight,categories:e.categories,series:e.series,animation:!0,timing:"easeOut",duration:1e3,rotate:!1,rotateLock:!1,background:"#FFFFFF",color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],padding:[15,10,0,15],fontSize:13,fontColor:"#666666",dataLabel:!0,dataPointShape:!0,dataPointShapeType:"hollow",touchMoveLimit:60,enableScroll:!1,enableMarkLine:!1,legend:{show:!0,position:"bottom",float:"center",padding:5,margin:5,backgroundColor:"rgba(0,0,0,0)",borderColor:"rgba(0,0,0,0)",borderWidth:0,fontSize:13,fontColor:"#666666",lineHeight:11,hiddenColor:"#CECECE",itemGap:10},xAxis:{disableGrid:!0,disabled:!1,axisLine:!0,axisLineColor:"#CCCCCC",calibration:!1,fontColor:"#666666",fontSize:13,rotateLabel:!1,rotateAngle:45,itemCount:5,boundaryGap:"center",splitNumber:5,gridColor:"#CCCCCC",gridType:"solid",dashLength:4,gridEval:1,scrollShow:!1,scrollAlign:"left",scrollColor:"#A6A6A6",scrollBackgroundColor:"#EFEBEF",formatter:""},yAxis:{gridType:"dash",dashLength:2,disabled:!1,disableGrid:!1,splitNumber:5,gridColor:"#CCCCCC",padding:10,showTitle:!1,data:[]},extra:{line:{type:"straight",width:2,activeType:"hollow"},tooltip:{showBox:!0,showArrow:!0,showCategory:!1,borderWidth:0,borderRadius:0,borderColor:"#000000",borderOpacity:.7,bgColor:"#000000",bgOpacity:.7,gridType:"solid",dashLength:4,gridColor:"#CCCCCC",fontColor:"#FFFFFF",splitLine:!0,horizentalLine:!1,xAxisLabel:!1,yAxisLabel:!1,labelBgColor:"#FFFFFF",labelBgOpacity:.7,labelFontColor:"#666666"},markLine:{type:"solid",dashLength:4,data:[]}}})},tap:function(t){l[t.target.id].touchLegend(t),l[t.target.id].showToolTip(t)},getDataByKey:function(){var t={dataDt:"",mdCodes:["DATA_H_GLU"]};(0,o.getUserSummaryDataByMdcode)(t).then((function(t){t.code}))},init:function(){var e=this;t.log("this.$refs.exponentChart",this.$refs),0!=this.data.length&&this.$refs.chart.init((function(t){var a=new F2.Chart(t);return a.source(e.baseData),a.interval().position("genre*sold").color("genre"),a.render(),a}))},onTap:function(){uni.navigateTo({url:"/pages/records/add?objid=".concat(this.objid,"&taskid=").concat(this.taskId)})},getDataRuslt:function(){var t={taskRecordContent:[{DATA_H_GLU:"6.3"}]};(0,o.userSummaryDayReportList)(t).then((function(t){t.code}))},records:function(){var t=this,e=[{DATA_H_GLU:"6.3"}],a={content:e,mdTableId:this.objid,remark:"",taskId:this.taskId};(0,n.performServiceTask)(a).then((function(e){"0"==e.code&&t.getDataRuslt()}))}}};e.default=u}).call(this,a("5a52")["default"])},fcdf:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return r}));var r={uIcon:a("ece6").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"app-record"},[a("v-uni-view",{},[a("v-uni-view",{staticClass:"app-record-header"},[t.chart_date.length>0?a("v-uni-view",{staticClass:"app-record-header-info"},[a("v-uni-view",{staticClass:"date"},[t._v(t._s(t.chart_date[t.chart_date.length-1]))]),a("v-uni-view",{staticClass:"info"},[a("v-uni-view",{staticClass:"nums"},[t._v(t._s(t.chart_value[t.chart_value.length-1]))]),a("v-uni-view",{staticClass:"unit"},["error"===t.levels?a("v-uni-view",{staticClass:"tags tags_error"},[t._v(t._s(t.ruslt))]):t._e(),"success"===t.levels?a("v-uni-view",{staticClass:"tags tags_success"},[t._v(t._s(t.ruslt))]):t._e(),a("v-uni-view",{staticClass:"units"},[t._v(t._s(t.records_data.unit))])],1)],1)],1):a("v-uni-view",{staticClass:"app-record-header-info"},[a("v-uni-view",{staticClass:"info"},[a("v-uni-view",{staticClass:"nums2"},[t._v("无数据")])],1)],1),a("v-uni-view",{staticClass:"app-record-header-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onTap()}}},[a("u-icon",{attrs:{name:"plus"}}),t._v("添加记录")],1)],1),a("v-uni-view",{staticClass:"app-record-chart"},[a("v-uni-view",{staticClass:"app-record-chart-header"},[a("v-uni-view",{staticClass:"title"},[t._v(t._s(t.records_data.name)+" 近7天指标趋势")])],1),a("v-uni-canvas",{staticClass:"charts",attrs:{"canvas-id":"husfiVOlUCYUOvrgQRKYBktPCTnAPohJ",id:"husfiVOlUCYUOvrgQRKYBktPCTnAPohJ"},on:{touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.tap.apply(void 0,arguments)}}}),0==t.chart_date.length?a("v-uni-view",{},[t._v("近7天没有"+t._s(t.records_data.name)+"\n        数据，无法进行系统分析，快去测试1笔吧。")]):t._e()],1)],1),a("v-uni-view",{})],1)},n=[]}}]);