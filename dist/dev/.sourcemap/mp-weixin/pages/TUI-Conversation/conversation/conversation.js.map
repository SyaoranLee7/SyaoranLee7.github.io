{"version":3,"sources":["uni-app:///src/main.js","webpack:///./src/pages/TUI-Conversation/conversation/conversation.vue?a67a","webpack:///./src/pages/TUI-Conversation/conversation/conversation.vue?4221","webpack:///./src/pages/TUI-Conversation/conversation/conversation.vue?64d2","webpack:///./src/pages/TUI-Conversation/conversation/conversation.vue?5b3f","uni-app:///src/pages/TUI-Conversation/conversation/conversation.vue","webpack:///./src/pages/TUI-Conversation/conversation/conversation.vue?ab95","webpack:///./src/pages/TUI-Conversation/conversation/conversation.vue?1358"],"names":["createPage","Page"],"mappings":"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","file":"pages/TUI-Conversation/conversation/conversation.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/TUI-Conversation/conversation/conversation.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./conversation.vue?vue&type=template&id=96558e3e&scoped=true&\"\nvar renderjs\nimport script from \"./conversation.vue?vue&type=script&lang=js&\"\nexport * from \"./conversation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./conversation.vue?vue&type=style&index=0&id=96558e3e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"96558e3e\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/TUI-Conversation/conversation/conversation.vue\"\nexport default component.exports","export * from \"-!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--14-0!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./conversation.vue?vue&type=template&id=96558e3e&scoped=true&\"","var components = {\n  uTabbar: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-tabbar/u-tabbar\" */ \"@/uview-ui/components/u-tabbar/u-tabbar.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./conversation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./conversation.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"container-conversation\">\r\n    <view class=\"scroll-box\">\r\n      <view class=\"uni-list margintop-bar\">\r\n\r\n        <!-- conversationList           userList -->\r\n        <view\r\n          v-for=\"item in userList\"\r\n          :key=\"item.userID\"\r\n          @tap=\"handleRoute(item.userID)\"\r\n        >\r\n          <userItem\r\n            :data-type=\"item.type\"\r\n            :conversation=\"item\"\r\n          ></userItem>\r\n          <!-- <TUIConversationItem :data-type=\"item.type\" :conversation=\"item\">\r\n          </TUIConversationItem> -->\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <view class=\"bottom-back\">\r\n      <view class=\"bottom-area\">\r\n        <view\r\n          v-if=\"showSelectTag\"\r\n          class=\"conversation-bubble\"\r\n          @tap.stop=\"handleEditToggle\"\r\n        >\r\n          <view\r\n            v-for=\"(item, index) in array\"\r\n            :key=\"index\"\r\n            class=\"picker\"\r\n            :data-name=\"item.name\"\r\n            @tap=\"handleOnTap\"\r\n            >{{ item.name }}</view\r\n          >\r\n        </view>\r\n        <image\r\n          @tap=\"showMore\"\r\n          class=\"btn-show-more\"\r\n          src=\"@/static/static/assets/add.svg\"\r\n        ></image>\r\n        <!-- <view @tap=\"learnMore\" class=\"im-link\">了解更多IM功能</view> -->\r\n      </view>\r\n    </view>\r\n\r\n    <u-tabbar\r\n      :list=\"vuex_company_tabbar\"\r\n      active-color=\"#3873fe\"\r\n      fontSize=\"8px\"\r\n      :icon-size=\"48\"\r\n    ></u-tabbar>\r\n  </view>\r\n</template>\r\n<!-- 这里有个加载的补丁逻辑待优化，页面向SDK请求conversationList的时候会有时延，\r\n造成页面的一个抖动，这里加一个if逻辑打一个补丁，后续继续优化 -->\r\n<script>\r\nimport logger from \"../../../utils/logger.js\";\r\nimport TUIConversationItem from \"@/components/tui-conversation/conversation-item/index\";\r\nimport userItem from \"@/components/tui-conversation/conversation-item/userItem\";\r\nimport TUIMessageList from \"@/components/tui-chat/message-list/index\";\r\n\r\nimport { genTestUserSig } from \"@/debug/GenerateTestUserSig.js\";\r\n\r\nimport { imTencentGetUserSig } from \"@/api/im\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      conversationList: [],\r\n      showSelectTag: false,\r\n      array: [\r\n        {\r\n          name: \"发起会话\",\r\n        },\r\n        {\r\n          name: \"发起群聊\",\r\n        },\r\n        {\r\n          name: \"加入群聊\",\r\n        },\r\n      ],\r\n      userSig: \"\",\r\n      userId: \"\",\r\n      userList: [],\r\n    };\r\n  },\r\n\r\n  components: {\r\n    TUIConversationItem,\r\n    TUIMessageList,\r\n    userItem,\r\n  },\r\n  props: {},\r\n  watch: {\r\n    conversationList: {\r\n      handler: function (newVal) {\r\n        // console.log(JSON.stringify(newVal), \"显示数据\");\r\n      },\r\n      immediate: true,\r\n      deep: true,\r\n    },\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面加载\r\n   */\r\n  onLoad() {\r\n    // 登入后拉去会话列表\r\n\r\n    setTimeout((item) => {\r\n      this.getUserSig();\r\n    }, 1000);\r\n  },\r\n\r\n  /**\r\n   * 生命周期函数--监听页面卸载\r\n   */\r\n  onUnload() {\r\n    uni.$TUIKit.off(uni.$TUIKitEvent.SDK_READY, this.onConversationListUpdated);\r\n  },\r\n\r\n  methods: {\r\n    getUserSig() {\r\n      imTencentGetUserSig({}).then((res) => {\r\n        if (res.code == \"0\") {\r\n          this.userSig = res.data.userSig;\r\n          this.userId = res.data.userId;\r\n          this.login();\r\n        }\r\n      });\r\n    },\r\n    login() {\r\n      //   console.log(uni.$TUIKit, \"聊天iddap\");\r\n      let that = this;\r\n      const SDKAppID = genTestUserSig(\"\").sdkAppID;\r\n      let id = SDKAppID.toString();\r\n      let data = genTestUserSig(id);\r\n      console.log(data, \"4567890\");\r\n\r\n      let req = { userID: this.userId, userSig: this.userSig };\r\n\r\n      uni.$TUIKit\r\n        .login(req)\r\n        .then((res) => {\r\n          setTimeout(() => {\r\n            that.getConversationList();\r\n            uni.$TUIKit.on(\r\n              uni.$TUIKitEvent.CONVERSATION_LIST_UPDATED,\r\n              that.onConversationListUpdated\r\n            );\r\n          }, 500);\r\n        })\r\n        .catch((res) => {\r\n          console.log(\"我走倒这里了哈哈\");\r\n        });\r\n    },\r\n\r\n    handleRoute(id) {\r\n      const url = `../../TUI-Chat/chat?conversationID=${\"C2C\" + id}`;\r\n      uni.navigateTo({\r\n        url,\r\n      });\r\n    },\r\n    onConversationListUpdated(event) {\r\n      logger.log(\"TUI-conversation | onConversationListUpdated  |ok\");\r\n      this.setData({\r\n        conversationList: event.data,\r\n      });\r\n    },\r\n\r\n    getConversationList() {\r\n      uni.$TUIKit\r\n        .getFriendList({ conversationID: \"C2Cexample\" })\r\n        .then((res) => {\r\n          let data = res.data;\r\n          this.userList = data;\r\n          console.log(res, \"消息列表列表\");\r\n        });\r\n      uni.$TUIKit.getConversationList().then((imResponse) => {\r\n        console.log(imResponse, \"初始化 会话列表\");\r\n        logger.log(\r\n          `TUI-conversation | getConversationList | getConversationList-length: ${imResponse.data.conversationList.length}`\r\n        );\r\n        this.setData({\r\n          conversationList: imResponse.data.conversationList,\r\n        });\r\n      });\r\n    },\r\n\r\n    showMore() {\r\n      this.setData({\r\n        showSelectTag: !this.showSelectTag,\r\n      });\r\n    },\r\n\r\n    learnMore() {\r\n      uni.navigateTo({\r\n        url: \"../../TUI-User-Center/webview/webview?url=https://cloud.tencent.com/product/im\",\r\n      });\r\n    },\r\n\r\n    handleOnTap(event) {\r\n      this.setData(\r\n        {\r\n          showSelectTag: false,\r\n        },\r\n        () => {\r\n          switch (event.currentTarget.dataset.name) {\r\n            case \"发起会话\":\r\n              this.$createConversation();\r\n              break;\r\n\r\n            case \"发起群聊\":\r\n              this.$createGroup();\r\n              break;\r\n\r\n            case \"加入群聊\":\r\n              this.$joinGroup();\r\n\r\n            default:\r\n              break;\r\n          }\r\n        }\r\n      );\r\n    },\r\n\r\n    goHomePage() {\r\n      // uni.navigateTo 不能跳转到 tabbar 页面，使用 uni.switchTab 代替\r\n      uni.switchTab({\r\n        url: \"../../TUI-Index/index\",\r\n      });\r\n    },\r\n\r\n    handleEditToggle() {\r\n      this.setData({\r\n        showSelectTag: false,\r\n      });\r\n    },\r\n\r\n    $createConversation() {\r\n      uni.navigateTo({\r\n        url: \"../create-conversation/create\",\r\n      });\r\n    },\r\n\r\n    $createGroup() {\r\n      uni.navigateTo({\r\n        url: \"../../TUI-Group/create-group/create\",\r\n      });\r\n    },\r\n\r\n    $joinGroup() {\r\n      uni.navigateTo({\r\n        url: \"../../TUI-Group/join-group/join\",\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n@import \"./conversation.css\";\r\n</style>\r\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./conversation.vue?vue&type=style&index=0&id=96558e3e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./conversation.vue?vue&type=style&index=0&id=96558e3e&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1672801257103\n      var cssReload = require(\"D:/ITG/Project/healthy-customer-app/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}