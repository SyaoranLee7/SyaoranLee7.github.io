(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-602611a0"],{"0291":function(t,e,i){"use strict";i("660e")},"4fa7":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"企业名称",prop:"name"}},[i("mt-input",{attrs:{width:t.inputWidth},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"机构代码",prop:"organizingCode"}},[i("mt-input",{attrs:{width:t.inputWidth},model:{value:t.form.organizingCode,callback:function(e){t.$set(t.form,"organizingCode",e)},expression:"form.organizingCode"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"税务登记证号",prop:"taxCode"}},[i("mt-input",{attrs:{width:t.inputWidth},model:{value:t.form.taxCode,callback:function(e){t.$set(t.form,"taxCode",e)},expression:"form.taxCode"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"营业执照号",prop:"licenseCode"}},[i("mt-input",{attrs:{width:t.inputWidth},model:{value:t.form.licenseCode,callback:function(e){t.$set(t.form,"licenseCode",e)},expression:"form.licenseCode"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"企业地址",prop:"address"}},[i("mt-input",{attrs:{width:t.inputWidth},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"联系人",prop:"contactName"}},[i("mt-input",{attrs:{width:t.inputWidth},model:{value:t.form.contactName,callback:function(e){t.$set(t.form,"contactName",e)},expression:"form.contactName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"联系电话",prop:"contactNumber"}},[i("mt-input",{attrs:{width:t.inputWidth},model:{value:t.form.contactNumber,callback:function(e){t.$set(t.form,"contactNumber",e)},expression:"form.contactNumber"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"法定代表人",prop:"legalRepresentative"}},[i("mt-input",{attrs:{width:t.inputWidth},model:{value:t.form.legalRepresentative,callback:function(e){t.$set(t.form,"legalRepresentative",e)},expression:"form.legalRepresentative"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"企业描述",prop:"description"}},[i("mt-input",{attrs:{width:t.inputWidth},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("mt-button",{attrs:{tupe:"submain"},on:{click:t.handleClose}},[t._v("取消")]),t._v(" "),i("mt-button",{on:{click:t.handleSubmitBtn}},[t._v("确定")])],1)],1)},n=[],s=i("ed08"),o={name:"ApplicationDialog",data:function(){return{form:{code:"",name:"",organizingCode:"",taxCode:"",licenseCode:"",address:"",contactName:"",contactNumber:"",legalRepresentative:"",description:""},rules:{name:[{required:!0,message:"请输入企业名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],organizingCode:[{required:!0,message:"请输入组织机构代码",trigger:"blur"},{min:9,max:9,message:"请输入9位组织机构代码",trigger:"blur"}]},dialogType:"add",dialogVisible:!1,inputWidth:"calc(100% - 1rem)"}},computed:{title:function(){return"add"===this.dialogType?"新建企业":"edit"===this.dialogType?"编辑企业":void 0}},created:function(){},mounted:function(){},methods:{open:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add",e=arguments.length>1?arguments[1]:void 0;this._.assign(this.form,e),this.dialogType=t,this.dialogVisible=!0},handleSubmitBtn:function(){var t=this;this.$refs["form"].validate((function(e){if(!e)return!1;t.handleSubmit()}))},handleSubmit:function(){var t=this,e=this._.clone(this.form);"add"===this.dialogType?(delete e.code,this.$request.post(this.API.ADD_COMPANY,e).then((function(e){e.success&&(t.$mtMessage.success("新增成功！"),t.handleClose(),t.$emit("update"))}))):"edit"===this.dialogType&&this.$request.post(this.API.UPDATE_COMPANY,e).then((function(e){e.success&&(t.$mtMessage.success("修改成功！"),t.handleClose(),t.$emit("update"))}))},handleClose:function(){this.$refs.form.resetFields(),this.dialogVisible=!1,Object(s["d"])(this.form)}}},r=o,l=i("2877"),c=Object(l["a"])(r,a,n,!1,null,"c402121e",null);e["a"]=c.exports},"660e":function(t,e,i){},"839d":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));i("20d6"),i("7514"),i("c5f6"),i("ac6a"),i("28a5"),i("a481");var a=i("ed08"),n=(document.querySelector("body").offsetHeight,{data:function(){return{list:[],listKey:"",listRowStyle:{cursor:"pointer"},tableHeight:"auto",tableHeightFixed:"20rem",inputWidth:"calc(100% - 40px)",selected:[],total:0,page:1,pageSize:20,pageSizes:[20,50,100,200],pageLayout:"sizes, prev, pager, next",activeRow:0,fixedBottom:!1}},mounted:function(){var t=this;window.onresize=function(){t.fixedBottom=document.documentElement.clientHeight<window.screen.height};var e=document.querySelector(".app-main");e.onscroll=function(){e.scrollTop+document.body.clientHeight>=e.scrollHeight?t.fixedBottom=!1:t.fixedBottom=!0}},watch:{list:{deep:!0,handler:function(){1===this.page||this.list.length||(this.page--,this.readList())}}},computed:{totalSelected:function(){return this.selected.length},listBtnDisabled:function(){return!this.totalSelected},isStripe:function(){return this.$store.state.settings.isStripe}},filters:{formatMoney:function(t){for(var e=2,i=parseFloat((t+"").replace(/[^\d\.-]/g,"")).toFixed(e)+"",a=i.split(".")[0].split("").reverse(),n=i.split(".")[1],s="",o=0;o<a.length;o++)s+=a[o]+((o+1)%3==0&&o+1!=a.length?",":"");return"￥"+s.split("").reverse().join("")+"."+n},formatDate:function(t){var e=t.split("、"),i="";return e.forEach((function(t){var e=t.split("-"),a=Number(e[1])>9?e[1]:"0"+e[1],n=Number(e[2])>9?e[2]:"0"+e[2];i+=e[0]+"年"+a+"月"+n+"日、"})),i.substring(0,i.length-1)}},methods:{readList:function(){},resetSearch:function(){Object(a["d"])(this.filter),this.page=1,this.pageSize=20,this.readList()},emptyFormatter:function(t,e){return e.property&&(t[e.property]||0===t[e.property])?t[e.property]:"--"},adSearch:function(){this.page=1,this.readList()},autoSelectList:function(){var t=this,e=this.listKey,i=this.$refs.tableList;i&&this.list.forEach((function(a,n){var s=t.selected.find((function(t){return t[e]===a[e]}));s&&setTimeout((function(){i.toggleRowSelection(t.list[n],!0)}),50)}))},tableRowClassName:function(t){var e=t.row;t.rowIndex;if(e===this.activeRow)return"active-row"},handleSelect:function(t,e){var i=this.listKey,a=!!t.find((function(t){return t[i]===e[i]})),n=this.selected.findIndex((function(t){return console.log(t,e),t[i]===e[i]}));a&&-1===n&&this.selected.push(e),a||-1===n||this.selected.splice(n,1)},handleSelectAll:function(t){var e=this,i=this.listKey;t.length?t.forEach((function(t){var a=e.selected.find((function(e){return e[i]===t[i]}));a||e.selected.push(t)})):this.list.forEach((function(t){var a=e.selected.findIndex((function(e){return e[i]===t[i]}));-1!==a&&e.selected.splice(a,1)}))},handleSelectedChange:function(t){},handleSizeChange:function(t){this.pageSize=t,this.page=1,this.readList()},handleCurrentChange:function(t){this.page=t,this.readList()}}})},e8b9:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"member"},[i("div",{staticClass:"head"},[i("div",{staticClass:"info"},[i("div",{staticClass:"info-name"},[t._v(t._s(t.detail.name))]),t._v(" "),i("div",{staticClass:"info-detail"},[i("mt-detailinput",{staticClass:"item",attrs:{label:"企业地址"}},[t._v(t._s(t.detail.address))]),t._v(" "),i("mt-detailinput",{staticClass:"item",attrs:{label:"联系人"}},[t._v(t._s(t.detail.contactName))]),t._v(" "),i("mt-detailinput",{staticClass:"item",attrs:{label:"联系电话"}},[t._v(t._s(t.detail.contactNumber))])],1),t._v(" "),i("div",{staticClass:"info-detail"},[i("mt-detailinput",{staticClass:"item",attrs:{label:"机构代码"}},[t._v(t._s(t.detail.organizingCode))]),t._v(" "),i("mt-detailinput",{staticClass:"item",attrs:{label:"企业描述"}},[t._v(t._s(t.detail.description))])],1)]),t._v(" "),i("div",{staticClass:"operate"},[i("mt-button",{on:{click:t.editCompanyBtn}},[t._v("编辑")])],1)]),t._v(" "),i("div",{staticClass:"mt-list"},[i("div",{staticClass:"mt-list-filter"},[i("el-form",{ref:"form",attrs:{model:t.filter,"label-width":"80px"}},[i("el-row",[i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"用户姓名"}},[i("mt-input",{attrs:{width:t.inputWidth},model:{value:t.filter.name,callback:function(e){t.$set(t.filter,"name",e)},expression:"filter.name"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:18}},[i("div",{staticClass:"mt-list-filter-btn"},[i("mt-button",{on:{click:t.addBtn}},[t._v("新建")]),t._v(" "),i("mt-button",{on:{click:t.readList}},[t._v("搜索")]),t._v(" "),i("mt-button",{attrs:{type:"submain"},on:{click:t.resetSearch}},[t._v("重置")])],1)])],1)],1)],1),t._v(" "),i("el-table",{staticClass:"mt-list-table table",attrs:{data:t.list,height:"auto"}},[i("el-table-column",{attrs:{prop:"name",label:"用户姓名","min-width":"100"}}),t._v(" "),i("el-table-column",{attrs:{prop:"phone",label:"手机号","min-width":"120"}}),t._v(" "),i("el-table-column",{attrs:{prop:"id_card",label:"身份证号","min-width":"150"}}),t._v(" "),i("el-table-column",{attrs:{prop:"updateBy",label:"最后修改人","min-width":"120"}}),t._v(" "),i("el-table-column",{attrs:{prop:"updateTime",label:"最后修改时间","min-width":"140"}}),t._v(" "),i("el-table-column",{attrs:{prop:"createBy",label:"创建人","min-width":"120"}}),t._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间","min-width":"140"}}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("mt-button",{attrs:{type:"table"},on:{click:function(i){return t.goEdit(e.row)}}},[t._v("编辑")]),t._v(" "),i("mt-button",{attrs:{type:"table"},on:{click:function(i){return t.goDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("div",{staticClass:"mt-list-footer"},[i("div",{staticClass:"totaldata"},[t._v("共"+t._s(t.total)+"条")]),t._v(" "),i("div",{staticClass:"page"},[i("el-pagination",{staticClass:"mt-page",staticStyle:{float:"right"},attrs:{"current-page":t.page,"page-size":t.pageSize,"page-sizes":t.pageSizes,total:t.total,background:"",layout:t.pageLayout},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])],1),t._v(" "),i("member-dialog",{ref:"memberDialog",attrs:{code:t.code},on:{update:t.readList}}),t._v(" "),i("company-dialog",{ref:"companyDialog",on:{update:t.readList}})],1)},n=[],s=(i("7f7f"),i("96cf"),i("1da1")),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:"企业人员管理",visible:t.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"用户姓名",prop:"name"}},[i("mt-input",{attrs:{width:t.inputWidth},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[i("mt-input",{attrs:{width:t.inputWidth},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"身份证号",prop:"idCard"}},[i("mt-input",{attrs:{width:t.inputWidth},model:{value:t.form.idCard,callback:function(e){t.$set(t.form,"idCard",e)},expression:"form.idCard"}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("mt-button",{attrs:{tupe:"submain"},on:{click:t.handleClose}},[t._v("取消")]),t._v(" "),i("mt-button",{on:{click:t.handleSubmitBtn}},[t._v("确定")])],1)],1)},r=[],l=i("61f7"),c=i("ed08"),d={name:"MemberDialog",props:{code:{type:String,default:""}},data:function(){return{form:{code:"",name:"",phone:"",idCard:""},rules:{name:[{required:!0,message:"请输入用户姓名",trigger:"blur"},{min:1,max:5,message:"长度在 1 到 5 个字符",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:l["c"],trigger:"blur"}],idCard:[{required:!0,message:"请输入身份证号",trigger:"blur"},{validator:l["b"],trigger:"blur"}]},dialogType:"add",dialogVisible:!1,inputWidth:"calc(100% - 1rem)"}},computed:{title:function(){return"add"===this.dialogType?"新建用户":"edit"===this.dialogType?"编辑用户":void 0}},created:function(){},mounted:function(){},methods:{open:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add",e=arguments.length>1?arguments[1]:void 0;this._.assign(this.form,e),this.dialogType=t,this.dialogVisible=!0},handleSubmitBtn:function(){var t=this;this.$refs["form"].validate((function(e){if(!e)return!1;t.handleSubmit()}))},handleSubmit:function(){var t=this,e=this._.clone(this.form);e.companyCode=this.code,"add"===this.dialogType?(delete e.code,this.$request.post(this.API.ADD_COMPANY_MEMBER,e).then((function(e){e.success&&(t.$mtMessage.success("新增成功！"),t.handleClose(),t.$emit("update"))}))):"edit"===this.dialogType&&this.$request.post(this.API.UPDATE_COMPANY_MEMBER,e).then((function(e){e.success&&(t.$mtMessage.success("修改成功！"),t.handleClose(),t.$emit("update"))}))},handleClose:function(){this.$refs.form.resetFields(),this.dialogVisible=!1,Object(c["d"])(this.form)}}},u=d,m=i("2877"),p=Object(m["a"])(u,o,r,!1,null,"e0faa30a",null),f=p.exports,h=i("4fa7"),g=i("839d"),b={name:"MemberList",components:{MemberDialog:f,CompanyDialog:h["a"]},data:function(){return{code:"",filter:{name:""},detail:{},inputWidth:"calc(100% - 1rem)"}},mixins:[g["a"]],created:function(){this.code=this.$route.query.code,this.code&&this.readList()},mounted:function(){},methods:{readList:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e={companyCode:this.code,keyWord:this.filter.name,page:this.page,pageSize:this.pageSize},this.$request.post(this.API.GET_COMPANY_MEMBER,e).then((function(t){console.log("res:",t),t.success&&(i.detail=t.data,i.list=t.data.records,i.total=t.data.total,console.log("list:",i.list))}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),editCompanyBtn:function(){this.$refs.companyDialog.open("edit",this.detail)},addBtn:function(){this.$refs.memberDialog.open("add")},goEdit:function(t){this.$refs.memberDialog.open("edit",Object(c["b"])(t))},goDelete:function(t){var e=this;this.$confirm("是否删除该用户？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.deleteMember(t)})).catch((function(){}))},deleteMember:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var i,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i={code:e.code},this.$request.post(this.API.DELETE_COMPANY_MEMBER,i).then((function(t){t.success&&(a.$mtMessage.success("删除成功！"),a.readList())}));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},v=b,_=(i("0291"),Object(m["a"])(v,a,n,!1,null,"44697551",null));e["default"]=_.exports}}]);