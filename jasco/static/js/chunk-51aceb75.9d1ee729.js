(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51aceb75"],{6762:function(t,e,i){"use strict";var n=i("5ca1"),a=i("c366")(!0);n(n.P,"Array",{includes:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")("includes")},"839d":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));i("20d6"),i("7514"),i("c5f6"),i("ac6a"),i("28a5"),i("a481");var n=i("ed08"),a=(document.querySelector("body").offsetHeight,{data:function(){return{list:[],listKey:"",listRowStyle:{cursor:"pointer"},tableHeight:"auto",tableHeightFixed:"20rem",inputWidth:"calc(100% - 40px)",selected:[],total:0,page:1,pageSize:20,pageSizes:[20,50,100,200],pageLayout:"sizes, prev, pager, next",activeRow:0,fixedBottom:!1}},mounted:function(){var t=this;window.onresize=function(){t.fixedBottom=document.documentElement.clientHeight<window.screen.height};var e=document.querySelector(".app-main");e.onscroll=function(){e.scrollTop+document.body.clientHeight>=e.scrollHeight?t.fixedBottom=!1:t.fixedBottom=!0}},watch:{list:{deep:!0,handler:function(){1===this.page||this.list.length||(this.page--,this.readList())}}},computed:{totalSelected:function(){return this.selected.length},listBtnDisabled:function(){return!this.totalSelected},isStripe:function(){return this.$store.state.settings.isStripe}},filters:{formatMoney:function(t){for(var e=2,i=parseFloat((t+"").replace(/[^\d\.-]/g,"")).toFixed(e)+"",n=i.split(".")[0].split("").reverse(),a=i.split(".")[1],s="",o=0;o<n.length;o++)s+=n[o]+((o+1)%3==0&&o+1!=n.length?",":"");return"￥"+s.split("").reverse().join("")+"."+a},formatDate:function(t){var e=t.split("、"),i="";return e.forEach((function(t){var e=t.split("-"),n=Number(e[1])>9?e[1]:"0"+e[1],a=Number(e[2])>9?e[2]:"0"+e[2];i+=e[0]+"年"+n+"月"+a+"日、"})),i.substring(0,i.length-1)}},methods:{readList:function(){},resetSearch:function(){Object(n["d"])(this.filter),this.page=1,this.pageSize=20,this.readList()},emptyFormatter:function(t,e){return e.property&&(t[e.property]||0===t[e.property])?t[e.property]:"--"},adSearch:function(){this.page=1,this.readList()},autoSelectList:function(){var t=this,e=this.listKey,i=this.$refs.tableList;i&&this.list.forEach((function(n,a){var s=t.selected.find((function(t){return t[e]===n[e]}));s&&setTimeout((function(){i.toggleRowSelection(t.list[a],!0)}),50)}))},tableRowClassName:function(t){var e=t.row;t.rowIndex;if(e===this.activeRow)return"active-row"},handleSelect:function(t,e){var i=this.listKey,n=!!t.find((function(t){return t[i]===e[i]})),a=this.selected.findIndex((function(t){return console.log(t,e),t[i]===e[i]}));n&&-1===a&&this.selected.push(e),n||-1===a||this.selected.splice(a,1)},handleSelectAll:function(t){var e=this,i=this.listKey;t.length?t.forEach((function(t){var n=e.selected.find((function(e){return e[i]===t[i]}));n||e.selected.push(t)})):this.list.forEach((function(t){var n=e.selected.findIndex((function(e){return e[i]===t[i]}));-1!==n&&e.selected.splice(n,1)}))},handleSelectedChange:function(t){},handleSizeChange:function(t){this.pageSize=t,this.page=1,this.readList()},handleCurrentChange:function(t){this.page=t,this.readList()}}})},b938:function(t,e,i){},c142:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"appeal mt-list"},[i("div",{staticClass:"mt-list-filter"},[i("el-form",{ref:"form",attrs:{model:t.filter,"label-width":"80px"}},[i("el-row",[i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"诉求标题"}},[i("mt-input",{attrs:{width:t.inputWidth},model:{value:t.filter.title,callback:function(e){t.$set(t.filter,"title",e)},expression:"filter.title"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"诉求状态"}},[i("mt-select",{attrs:{multiple:"",options:t.statusOptions,width:t.inputWidth},model:{value:t.filter.status,callback:function(e){t.$set(t.filter,"status",e)},expression:"filter.status"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"企业名称"}},[i("mt-input",{attrs:{width:t.inputWidth},model:{value:t.filter.companyName,callback:function(e){t.$set(t.filter,"companyName",e)},expression:"filter.companyName"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:6}},[i("div",{staticClass:"mt-list-filter-btn"},[i("mt-button",{on:{click:t.addBtn}},[t._v("新建诉求")]),t._v(" "),i("mt-button",{on:{click:t.readList}},[t._v("搜索")]),t._v(" "),i("mt-button",{attrs:{type:"submain"},on:{click:t.resetSearch}},[t._v("重置")])],1)])],1)],1)],1),t._v(" "),i("el-table",{staticClass:"mt-list-table table",attrs:{data:t.list,height:"auto"}},[i("el-table-column",{attrs:{prop:"title",label:"诉求标题","min-width":"180"}}),t._v(" "),i("el-table-column",{attrs:{prop:"status",label:"诉求状态","min-width":"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("getDictLabel")(e.row.status,"DICTYP7lJQZbAeCWNKwiFB1708241396"))+"\n      ")]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"companyName",label:"来源企业","min-width":"180"}}),t._v(" "),i("el-table-column",{attrs:{prop:"content",label:"诉求内容","min-width":"240"}}),t._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"诉求时间","min-width":"140"}}),t._v(" "),i("el-table-column",{attrs:{prop:"dealTime",label:"处理时间","min-width":"140"}}),t._v(" "),i("el-table-column",{attrs:{prop:"dealBy",label:"处理人","min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(e.row.dealBy.join("、"))+"\n      ")]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"appraise",label:"评价","min-width":"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("getDictLabel")(e.row.appraise,"DICTYPtp8fE6a1wBT5MLF21708399082"))+"\n      ")]}}])}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("mt-button",{attrs:{type:"table"},on:{click:function(i){return t.goDetail(e.row)}}},[t._v("查看")])]}}])})],1),t._v(" "),i("div",{staticClass:"mt-list-footer"},[i("div",{staticClass:"totaldata"},[t._v("共"+t._s(t.total)+"条")]),t._v(" "),i("div",{staticClass:"page"},[i("el-pagination",{staticClass:"mt-page",staticStyle:{float:"right"},attrs:{"current-page":t.page,"page-size":t.pageSize,"page-sizes":t.pageSizes,total:t.total,background:"",layout:t.pageLayout},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]),t._v(" "),i("new-appeal",{ref:"newAppeal",on:{update:t.readList}})],1)},a=[],s=(i("96cf"),i("1da1")),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:"新建诉求",visible:t.dialogVisible,width:"40%","close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"诉求标题",prop:"title"}},[i("mt-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"来源企业",prop:"companyCode"}},[i("mt-select",{attrs:{options:t.companyList,labelKey:"name",valueKey:"code"},model:{value:t.form.companyCode,callback:function(e){t.$set(t.form,"companyCode",e)},expression:"form.companyCode"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"诉求内容"}},[i("mt-input",{attrs:{type:"textarea"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"上传文件"}},[i("el-upload",{staticClass:"upload-demo",attrs:{action:t.actionUrl,name:"files",data:t.uploadData,multiple:"",limit:9,"before-remove":t.beforeRemove,"on-success":t.fileUpload,"file-list":t.fileList}},[i("el-button",{ref:"input",attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("mt-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确定")]),t._v(" "),i("mt-button",{on:{click:t.handleClose}},[t._v("取消")])],1)],1)},l=[],r=(i("6762"),i("28a5"),i("ed08")),c=(i("96eb"),{name:"NewAppeal",data:function(){return{form:{title:"",companyCode:"",content:"",file_paths:[]},rules:{title:[{required:!0,message:"请输入诉求标题",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],companyCode:[{required:!0,message:"请选择来源企业",trigger:"blur"}]},fileList:[],companyList:[],dialogVisible:!1}},computed:{actionUrl:function(){return this.API.UPLOAD_FILE},uploadData:function(){return{accountId:this.$store.state.user.userInfo.accountInfo.accountId,token:this.$store.state.user.token}}},created:function(){this.getCompanyList()},mounted:function(){},methods:{open:function(){this.dialogVisible=!0},getCompanyList:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e={keyWord:"",page:1,pageSize:1e4},this.$request.post(this.API.GET_COMPANY_LIST,e).then((function(t){t.success&&(i.companyList=t.data.records)}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),fileUpload:function(t){if(1e4===t.code){var e=t.data["file_paths"][0],i=["jpg","jpeg","png"],n=["mp4","avi","mov","MOV"],a=e.split(".").pop().toLowerCase();if(i.includes(a))this.form["file_paths"].push(e);else{if(!n.includes(a))return!1;this.form["file_paths"].push(e)}}},beforeRemove:function(t,e){return!1},handleSubmit:function(){var t=this,e=this.form;this.$request.post(this.API.ADD_APPEAL,e).then((function(e){e.success&&(t.$mtMessage.success("录入成功!"),t.$emit("update"),t.handleClose())}))},handleClose:function(){this.$refs.form.resetFields(),this.dialogVisible=!1,this.fileList=[],Object(r["d"])(this.form)}}}),u=c,p=i("2877"),d=Object(p["a"])(u,o,l,!1,null,"fdcbcb2c",null),f=d.exports,m=i("839d"),h={name:"AppealList",data:function(){return{filter:{title:"",status:[],companyName:""},statusOptions:[],inputWidth:"calc(100% - 1rem)"}},components:{NewAppeal:f},mixins:[m["a"]],created:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.DICT.getDict("DICTYP7lJQZbAeCWNKwiFB1708241396");case 2:this.statusOptions=t.sent,this.readList();case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){},methods:{readList:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this._.clone(this.filter),e.page=this.page,e.pageSize=this.pageSize,this.$request.post(this.API.GET_APPEAL_LIST,e).then((function(t){console.log("getAppealList:",t),t.success&&(i.list=t.data.records,i.total=t.data.total)}));case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addBtn:function(){this.$refs.newAppeal.open()},goDetail:function(t){this.$router.push("/appeal/detail?id="+t.id)}}},g=h,b=(i("c231"),Object(p["a"])(g,n,a,!1,null,"1330bc20",null));e["default"]=b.exports},c231:function(t,e,i){"use strict";i("b938")}}]);